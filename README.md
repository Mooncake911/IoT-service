# IoT Service Microservices Project

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–±–æ—Ä–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Docker & Docker Compose
*   Java 24 (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏)
*   Maven

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
docker-compose up -d --build
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–¥–Ω–∏–º–µ—Ç –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **Event-Driven Architecture** –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

1.  **iot-controller** (Port: 8082): –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ MongoDB –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –≤ RabbitMQ.
2.  **iot-rule-engine** (Port: 8083): –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∞–ª–µ—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª.
3.  **iot-analytics** (Port: 8081): –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
4.  **iot-data-simulator** (Port: 8080): –ò–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å–æ—Ç–µ–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –≥–µ–Ω–µ—Ä–∏—Ä—É—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.
5.  **shared**: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –æ–±—â–∏–º–∏ DTO –∏ –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö.

---

## üì° API Documentation

### 1. Ingestion API (Controller)
*   **POST** `/api/ingest`
    *   –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞–∫–µ—Ç (List) –æ–±—ä–µ–∫—Ç–æ–≤ `Device`.
    *   –ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞: `[{"deviceId": 1, "batteryLevel": 85.5, ...}]`

### 2. Analytics API
*   **POST** `/api/analytics/data`
    *   –ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
*   **GET** `/api/analytics/stats?method=Observable&batchSize=50`
    *   –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã: `Observable`, `Flowable`, `Single` –∏ –¥—Ä.

### 3. Simulator Control API
*   **POST** `/api/simulator/config`
    *   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏: `{"deviceCount": 100, "messagesPerSecond": 10}`
*   **POST** `/api/simulator/` **start** **or** **stop**
    *   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–æ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
*   **GET** `/api/simulator/status`
    *   –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞.

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –õ–æ–≥–∏ (Observability)

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

### 1. ELK Stack (Logs)
*   **–ê–¥—Ä–µ—Å**: [http://localhost:5601](http://localhost:5601)
*   **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**:
    1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Stack Management** -> **Data Views**.
    2. –°–æ–∑–¥–∞–π—Ç–µ Data View —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º `logs-*`.
    3. –ò–∑—É—á–∞–π—Ç–µ –ª–æ–≥–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ **Discover**.
*   **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –õ–æ–≥–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ Logstash –ø–æ TCP (–ø–æ—Ä—Ç 5044), —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –ª—é–±–æ–π –û–°.

### 2. Prometheus & Grafana (Metrics)
*   **Grafana**: [http://localhost:3000](http://localhost:3000) (Admin / admin)
*   **Prometheus**: [http://localhost:9090](http://localhost:9090)
*   –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ `/actuator/prometheus`.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
*   **Backend**: Spring Boot 3.4, Project Reactor, WebFlux.
*   **Data**: MongoDB, RabbitMQ.
*   **Observability**: Elasticsearch, Logstash, Kibana, Prometheus, Grafana.
